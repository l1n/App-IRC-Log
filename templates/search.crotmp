<html>
<head>
  <title>Search results on #<.name> IRC Channel</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <h1 align="center" style="font-weight: bolder">#<.name></h1>
  <&links($_, .name)>
  <hr/>
  <p><.query> (<.elapsed> msecs)</p>
  <table class="chat" valign="top">
    <tr class="head">
      <th>Date</th>
      <th>Time</th>
      <th>Nick</th>
      <th>Message</th>
    </tr>
    <@entries>
      <tr class="talk odd" id="<.date>Z<.target>">
        <td class="date"><.human-date></td>
        <td class="time"><a href="#<.date>Z<.target>"><.hh-mm></a></td>
        <td class="nick"><&HTML(.sender)> <a href="<.date>.html#<.target>">&gt;&gt;</a></td>
        <td class="message"><&HTML(.message)></td>
      </tr>
    </@>
  </table>
  <div id="footer">Powered by <a href="https://cro.services">Cro</a> and the <a href="https://raku.org">Raku Programming Language</a></div>
</body>
</html>

<:sub links($_, $channel)>
<p>
<table width="100%">
<tr>
  <td>
    Search <form action="search.html"><input name="query"/></form>
  </td>
  <td align="right">
    <form>
      <label for="channel">Channel</label>
      <select name="channel" id="channel" onchange="if (this.value) window.location.href=this.value">>
      <@channels>
        <option value="/<$_>/index.html"<?{ $_ eq $channel }> selected</?>><$_></option>
      </@>
    </select>
    </form>
  </td>
  <td align="right">
    <a href="today">Today</a>
    <a href="random">I feel lucky</a>
    <a href="/home.html">Home</a>
  </td>
</tr>
</table>
</p>
</:>
